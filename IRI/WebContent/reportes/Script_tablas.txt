
CREATE TABLE ATENCION (
       ATENCION_ID          NUMBER NOT NULL,
       VERIFICACION         VARCHAR2(255) NULL,
       OBSERVACION          VARCHAR2(255) NULL,
       TS_CREA              DATE DEFAULT SYSDATE NOT NULL,
       USR_CREA             VARCHAR2(15) NOT NULL,
       ESTADO               CHAR(1) NOT NULL,
       SOLICITUD_ID         NUMBER NOT NULL,
       TIPO                 CHAR(1) NULL,
       USR_MODI             VARCHAR2(15) NULL,
       TS_MODI              DATE NULL
);


ALTER TABLE ATENCION
       ADD  ( PRIMARY KEY (ATENCION_ID) ) ;

CREATE TABLE CARGA_LABORAL (
       CUENTA_ID            NUMBER NOT NULL,
       ESTADO               CHAR(1) NULL
);


ALTER TABLE CARGA_LABORAL
       ADD  ( PRIMARY KEY (CUENTA_ID) ) ;


CREATE TABLE CERTIFICADO_LIBRO (
       CERTIFICADO_ID       NUMBER NOT NULL,
       COD_LIBRO            CHAR(3) NOT NULL
);


ALTER TABLE CERTIFICADO_LIBRO
       ADD  ( PRIMARY KEY (CERTIFICADO_ID, COD_LIBRO) ) ;


CREATE TABLE CRITERIOS_ASIGNA (
       CUENTA_ID            NUMBER NOT NULL,
       CERTIFICADO_ID       NUMBER NOT NULL,
       ESTADO               CHAR(1) NULL,
       REG_PUB_ID           CHAR(2) NULL,
       OFIC_REG_ID          CHAR(2) NULL,
       GRUPO_ID             INTEGER NOT NULL
);


ALTER TABLE CRITERIOS_ASIGNA
       ADD  ( PRIMARY KEY (CUENTA_ID, REG_PUB_ID, OFIC_REG_ID, 
              CERTIFICADO_ID, GRUPO_ID) ) ;


CREATE TABLE DESTINATARIO (
       REG_PUB_ID           CHAR(2) NULL,
       OFIC_REG_ID          CHAR(2) NULL,
       COD_POST             VARCHAR2(30) NULL,
       DEPT_OTRO            VARCHAR2(30) NULL,
       DISTRITO             CHAR(30) NULL,
       PROV_ID              CHAR(2) NULL,
       DPTO_ID              CHAR(2) NULL,
       PAIS_ID              CHAR(2) NULL,
       TI_ENV               CHAR(1) NULL,
       RAZ_SOC              VARCHAR2(100) NULL,
       NOMBRES              VARCHAR2(40) NULL,
       APE_MAT              VARCHAR2(30) NULL,
       APE_PAT              VARCHAR2(30) NULL,
       TPO_PERS             CHAR(1) NULL,
       TS_CREA              DATE NULL,
       DIRECC               VARCHAR2(40) NULL,
       TIPO_DOC_ID          CHAR(2) NOT NULL,
       EMAIL                VARCHAR2(40) NOT NULL,
       NU_DOC_IDEN          VARCHAR2(15) NOT NULL,
       OBJETO_SOL_ID        INTEGER NOT NULL,
       DESTINATARIO_ID      INTEGER NOT NULL
);


ALTER TABLE DESTINATARIO
       ADD  ( PRIMARY KEY (DESTINATARIO_ID) ) ;


CREATE TABLE DOCUMENTO_ADJUNTO (
       DOCUMENTO_ID         INTEGER NOT NULL,
       TS_CREA              DATE NOT NULL,
       ATENCION_ID          NUMBER NOT NULL,
       TAMANO               CHAR(5) NOT NULL,
       NOMBRE               VARCHAR2(30) NOT NULL,
       NS_ATENCION          NUMBER NOT NULL,
       TIPO                 CHAR(1) NOT NULL
);


ALTER TABLE DOCUMENTO_ADJUNTO
       ADD  ( PRIMARY KEY (ATENCION_ID, NS_ATENCION, DOCUMENTO_ID, 
              TIPO) ) ;


CREATE TABLE GRUPO_LIBRO (
       COD_LIBRO            CHAR(3) NOT NULL,
       GRUPO_ID             INTEGER NOT NULL
);


ALTER TABLE GRUPO_LIBRO
       ADD  ( PRIMARY KEY (COD_LIBRO, GRUPO_ID) ) ;


CREATE TABLE OBJETO_SOLICITUD (
       SOLICITUD_ID         NUMBER NOT NULL,
       RAZ_SOC              VARCHAR2(100) NULL,
       NOMBRES              VARCHAR2(40) NULL,
       APE_MAT              VARCHAR2(30) NULL,
       APE_PAT              VARCHAR2(30) NULL,
       TI_PERS              CHAR(1) NOT NULL,
       REFNUM_PART          NUMBER NULL,
       NS_ASIENTO           NUMBER(5) NULL,
       COD_ACTO             CHAR(5) NULL,
       NUM_TITU             CHAR(8) NULL,
       AA_TITU              CHAR(4) NULL,
       CERTIFICADO_ID       NUMBER NOT NULL,
       NUMPAG               NUMBER NULL,
       REG_PUB_ID           CHAR(2) NOT NULL,
       OFIC_REG_ID          CHAR(2) NOT NULL,
       OBJETO_SOL_ID        INTEGER NOT NULL
);


ALTER TABLE OBJETO_SOLICITUD
       ADD  ( PRIMARY KEY (OBJETO_SOL_ID) ) ;


CREATE TABLE PAGO_SOLICITUD (
       SOLICITUD_ID         NUMBER NOT NULL,
       ABONO_ID             NUMBER NOT NULL,
       CONSUMO_ID           NUMBER NULL,
       TOTAL                NUMBER(12,2) NOT NULL,
       DESCUENTO            NUMBER(12,2) NOT NULL,
       GASTO_ENVIO          NUMBER(12,2) NOT NULL,
       SUBTOTAL             NUMBER(12,2) NOT NULL,
       TIPO_PAGO            CHAR(2) NOT NULL,
       COSTO_UNIDAD         NUMBER(12,2) NOT NULL,
       CANTIDAD             NUMBER NOT NULL,
       PAGO_SOLICITUD_ID    NUMBER NOT NULL
);


ALTER TABLE PAGO_SOLICITUD
       ADD  ( PRIMARY KEY (PAGO_SOLICITUD_ID) ) ;


CREATE TABLE SGMT_SOLICITUD (
       SOLICITUD_ID         NUMBER NOT NULL,
       USR_MOVIMIENTO       VARCHAR2(15) NOT NULL,
       TS_MOVIMIENTO        DATE DEFAULT SYSDATE NOT NULL,
       ESTADO_FINAL         CHAR(1) NOT NULL,
       ESTADO_INICIAL       CHAR(1) NOT NULL,
       NS_MOVIMIENTO        NUMBER NOT NULL
);


ALTER TABLE SGMT_SOLICITUD
       ADD  ( PRIMARY KEY (SOLICITUD_ID, NS_MOVIMIENTO) ) ;


CREATE TABLE SOLICITANTE (
       TPO_PERS             CHAR(1) NULL,
       NU_DOC_IDEN          VARCHAR2(15) NULL,
       RAZ_SOC              VARCHAR2(100) NULL,
       NOMBRES              VARCHAR2(40) NULL,
       APE_MAT              VARCHAR2(30) NULL,
       APE_PAT              VARCHAR2(30) NULL,
       TS_CREA              DATE DEFAULT SYSDATE NOT NULL,
       TIPO_DOC_ID          CHAR(2) NOT NULL,
       EMAIL                VARCHAR2(40) NOT NULL,
       SOLICITUD_ID         NUMBER NOT NULL,
       SOLICITANTE_ID       INTEGER NOT NULL
);


ALTER TABLE SOLICITANTE
       ADD  ( PRIMARY KEY (SOLICITANTE_ID) ) ;


CREATE TABLE SOLICITUD (
       SOLICITUD_ID         NUMBER NOT NULL,
       ESTADO               CHAR(1) NOT NULL,
       CUENTA_ID            NUMBER NULL,
       USR_MODI             VARCHAR2(15) NULL,
       USR_CREA             VARCHAR2(15) NOT NULL,
       TS_MODI              DATE NULL,
       TS_CREA              DATE DEFAULT SYSDATE NOT NULL
);


ALTER TABLE SOLICITUD
       ADD  ( PRIMARY KEY (SOLICITUD_ID) ) ;


CREATE TABLE SOLICITUD_X_CARGA (
       SOLICITUD_ID         NUMBER NOT NULL,
       CUENTA_ID            NUMBER NOT NULL,
       ROL                  CHAR(2) NOT NULL,
       USR_MODI             VARCHAR2(15) NULL,
       USR_CREA             VARCHAR2(15) NOT NULL,
       TS_MODI              DATE NULL,
       TS_CREA              DATE NOT NULL,
       CTA_ID_REG           NUMBER NOT NULL,
       PRIORIDAD            INTEGER DEFAULT 0 NOT NULL
);


ALTER TABLE SOLICITUD_X_CARGA
       ADD  ( PRIMARY KEY (SOLICITUD_ID, CUENTA_ID, ROL) ) ;


CREATE TABLE TIPO_ABONO (
       TIPO_ABONO           CHAR(1) NOT NULL,
       DESCRIPCION          VARCHAR2(40) NULL
);


ALTER TABLE TIPO_ABONO
       ADD  ( PRIMARY KEY (TIPO_ABONO) ) ;


CREATE TABLE TM_CERTIFICADOS (
       SERVICIO_ID          NUMBER NOT NULL,
       NOMBRE               VARCHAR2(100) NOT NULL,
       ESTADO               CHAR(1) NOT NULL,
       CERTIFICADO_ID       NUMBER NOT NULL,
       TPO_PERSONA          CHAR(1) NOT NULL,
       TPO_CERTIFICADO      CHAR(1) NOT NULL
);


ALTER TABLE TM_CERTIFICADOS
       ADD  ( PRIMARY KEY (CERTIFICADO_ID) ) ;


CREATE TABLE TM_DOC_IDEN (
       TIPO_DOC_ID          CHAR(2) NOT NULL,
       NOMBRE_ABREV         VARCHAR2(10) NOT NULL,
       TIPO_PER             CHAR(1) NOT NULL,
       ESTADO               CHAR(1) NULL,
       DESCRIPCION          VARCHAR2(40) NULL
);


ALTER TABLE TM_DOC_IDEN
       ADD  ( PRIMARY KEY (TIPO_DOC_ID) ) ;


CREATE TABLE TM_GRUPO (
       GRUPO_ID             INTEGER NOT NULL,
       DESCRIPCION          VARCHAR2(30) NOT NULL
);


ALTER TABLE TM_GRUPO
       ADD  ( PRIMARY KEY (GRUPO_ID) ) ;



ALTER TABLE ATENCION
       ADD  ( FOREIGN KEY (SOLICITUD_ID)
                             REFERENCES SOLICITUD ) ;


ALTER TABLE CARGA_LABORAL
       ADD  ( FOREIGN KEY (CUENTA_ID)
                             REFERENCES CUENTA ) ;


ALTER TABLE CERTIFICADO_LIBRO
       ADD  ( FOREIGN KEY (COD_LIBRO)
                             REFERENCES TM_LIBRO ) ;


ALTER TABLE CERTIFICADO_LIBRO
       ADD  ( FOREIGN KEY (CERTIFICADO_ID)
                             REFERENCES TM_CERTIFICADOS ) ;


ALTER TABLE CRITERIOS_ASIGNA
       ADD  ( FOREIGN KEY (GRUPO_ID)
                             REFERENCES TM_GRUPO ) ;


ALTER TABLE CRITERIOS_ASIGNA
       ADD  ( FOREIGN KEY (REG_PUB_ID, OFIC_REG_ID)
                             REFERENCES OFIC_REGISTRAL ) ;


ALTER TABLE CRITERIOS_ASIGNA
       ADD  ( FOREIGN KEY (CERTIFICADO_ID)
                             REFERENCES TM_CERTIFICADOS ) ;


ALTER TABLE CRITERIOS_ASIGNA
       ADD  ( FOREIGN KEY (CUENTA_ID)
                             REFERENCES CARGA_LABORAL ) ;


ALTER TABLE DESTINATARIO
       ADD  ( FOREIGN KEY (OBJETO_SOL_ID)
                             REFERENCES OBJETO_SOLICITUD ) ;


ALTER TABLE DESTINATARIO
       ADD  ( FOREIGN KEY (TIPO_DOC_ID)
                             REFERENCES TM_DOC_IDEN ) ;


ALTER TABLE DOCUMENTO_ADJUNTO
       ADD  ( FOREIGN KEY (ATENCION_ID, TIPO, NS_ATENCION)
                             REFERENCES ATENCION ) ;


ALTER TABLE GRUPO_LIBRO
       ADD  ( FOREIGN KEY (GRUPO_ID)
                             REFERENCES TM_GRUPO ) ;


ALTER TABLE GRUPO_LIBRO
       ADD  ( FOREIGN KEY (COD_LIBRO)
                             REFERENCES TM_LIBRO ) ;


ALTER TABLE OBJETO_SOLICITUD
       ADD  ( FOREIGN KEY (CERTIFICADO_ID)
                             REFERENCES TM_CERTIFICADOS ) ;


ALTER TABLE OBJETO_SOLICITUD
       ADD  ( FOREIGN KEY (SOLICITUD_ID)
                             REFERENCES SOLICITUD ) ;


ALTER TABLE OBJETO_SOLICITUD
       ADD  ( FOREIGN KEY (REG_PUB_ID, OFIC_REG_ID)
                             REFERENCES OFIC_REGISTRAL ) ;


ALTER TABLE PAGO_SOLICITUD
       ADD  ( FOREIGN KEY (CONSUMO_ID)
                             REFERENCES CONSUMO ) ;


ALTER TABLE PAGO_SOLICITUD
       ADD  ( FOREIGN KEY (ABONO_ID)
                             REFERENCES ABONO ) ;


ALTER TABLE PAGO_SOLICITUD
       ADD  ( FOREIGN KEY (SOLICITUD_ID)
                             REFERENCES SOLICITUD ) ;


ALTER TABLE SGMT_SOLICITUD
       ADD  ( FOREIGN KEY (SOLICITUD_ID)
                             REFERENCES SOLICITUD ) ;


ALTER TABLE SOLICITANTE
       ADD  ( FOREIGN KEY (SOLICITUD_ID)
                             REFERENCES SOLICITUD ) ;


ALTER TABLE SOLICITANTE
       ADD  ( FOREIGN KEY (TIPO_DOC_ID)
                             REFERENCES TM_DOC_IDEN ) ;


ALTER TABLE SOLICITUD
       ADD  ( FOREIGN KEY (CUENTA_ID)
                             REFERENCES CUENTA ) ;


ALTER TABLE SOLICITUD_X_CARGA
       ADD  ( FOREIGN KEY (CUENTA_ID)
                             REFERENCES CARGA_LABORAL ) ;


ALTER TABLE SOLICITUD_X_CARGA
       ADD  ( FOREIGN KEY (SOLICITUD_ID)
                             REFERENCES SOLICITUD ) ;


ALTER TABLE TM_CERTIFICADOS
       ADD  ( FOREIGN KEY (SERVICIO_ID)
                             REFERENCES TM_SERVICIO ) ;



